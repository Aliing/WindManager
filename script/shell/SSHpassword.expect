#!/usr/bin/expect -f
# yZhong@AeroHive.com
spawn ssh [lindex $argv 0] exit
match_max 100000
set timeout 1
expect {
  "*continue connecting*"
  {
    send -- "yes\r"
  }
  eof
  {
    catch wait result
    exit [lindex $result 3]
  }
}
expect {
  "*?assword:*"
  {
    exit 1
  }
  eof
  {
    exit 0
  }
}
set timeout 60
expect {
  eof
  {
    exit 0
  }
}
exit 2